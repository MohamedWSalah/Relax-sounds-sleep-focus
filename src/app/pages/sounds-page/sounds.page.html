<!-- Category Tabs -->
<div class="category-tabs">
  @for (category of categories(); track category.id) {
  <div
    class="tab"
    [class.active]="selectedCategory() === category.id"
    (click)="selectCategory(category.id)"
  >
    <span class="tab-icon">{{ category.icon }}</span>
    <span class="tab-name">{{ category.name }}</span>
  </div>
  }
</div>

<!-- Sound Grid -->
<div class="sound-grid">
  @for (sound of filteredSounds(); track sound.id) {
  <div class="sound-item">
    <!-- Compact Sound Card -->
    <div
      class="sound-card"
      [class]="{
            'selected': sound.selected,
            'premium': sound.premium
          }"
      (click)="!sound.premium && toggleSound(sound)"
    >
      @if (sound.premium) {
      <div class="premium-badge">
        <ion-icon name="lock-closed-outline"></ion-icon>
      </div>
      }

      <!-- Heart Icon for Favorites -->
      <div
        class="favorite-heart"
        [class.favorited]="isFavorite(sound.id)"
        (click)="toggleFavorite(sound, $event)"
      >
        <ion-icon
          [name]="isFavorite(sound.id) ? 'heart' : 'heart-outline'"
          class="heart-icon"
        ></ion-icon>
      </div>

      <div class="sound-icon">
        <span>{{ sound.icon }}</span>
      </div>
      <div class="sound-name">{{ sound.name }}</div>
    </div>

    <!-- Reserved Space for Sound Bar -->
    <div class="sound-bar-container">
      @if (sound.selected) {
      <div class="sound-bar" (click)="$event.stopPropagation()">
        <ion-range
          class="volume-slider"
          min="0"
          max="100"
          [value]="sound.volume * 100"
          (ionChange)="setVolume(sound, $event.detail.value)"
          (click)="$event.stopPropagation()"
        >
        </ion-range>
      </div>
      } @else {
      <div class="sound-bar-placeholder"></div>
      }
    </div>
  </div>
  }
</div>

<!-- Save Mix Floating Button -->
@if (hasPlayingSounds()) {
<button class="save-mix-fab" (click)="openSaveMixModal()">
  <ion-icon name="bookmark-outline" class="fab-icon"></ion-icon>
  <span class="fab-text">Save Mix</span>
</button>
}
