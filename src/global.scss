@use "./theme/dark-theme.scss" as *;
@use "./theme/theme-variables.scss";

/*
 * App Global CSS
 * ----------------------------------------------------------------------------
 * Put style rules here that you want to apply globally. These styles are for
 * the entire app and not just one component. Additionally, this file can be
 * used as an entry point to import other CSS/Sass files to be included in the
 * output CSS.
 * For more information on global stylesheets, visit the documentation:
 * https://ionicframework.com/docs/layout/global-stylesheets
 */

/* Core CSS required for Ionic components to work properly */
@import "@ionic/angular/css/core.css";

/* Basic CSS for apps built with Ionic */
@import "@ionic/angular/css/normalize.css";
@import "@ionic/angular/css/structure.css";
@import "@ionic/angular/css/typography.css";
@import "@ionic/angular/css/display.css";

/* Optional CSS utils that can be commented out */
@import "@ionic/angular/css/padding.css";
@import "@ionic/angular/css/float-elements.css";
@import "@ionic/angular/css/text-alignment.css";
@import "@ionic/angular/css/text-transformation.css";
@import "@ionic/angular/css/flex-utils.css";

/**
 * Ionic Dark Mode
 * -----------------------------------------------------
 * For more info, please see:
 * https://ionicframework.com/docs/theming/dark-mode
 */

/* @import "@ionic/angular/css/palettes/dark.always.css"; */
/* @import "@ionic/angular/css/palettes/dark.class.css"; */
@import "@ionic/angular/css/palettes/dark.system.css";
:root {
  padding-top: env(safe-area-inset-top);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Global background for the entire app */
ion-app {
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  transition: background-image 0.3s ease;
}

/* Dark theme background */
body.dark ion-app {
  background-image: url("./assets/images/background.png");
}

/* Light theme background */
body.light ion-app {
  background-image: url("./assets/images/Gemini_Generated_Image_uexyrruexyrruexy (2).png");
}

/* Add smooth transitions for theme changes */
body {
  transition: background-color 0.3s ease, color 0.3s ease;
}

* {
  transition: background-color 0.3s ease, color 0.3s ease,
    border-color 0.3s ease, box-shadow 0.3s ease;
}

/* Ensure all ion-content elements inherit the background properly */
ion-content {
  --background: transparent;
}

/* Responsive background adjustments */
@media (max-width: 480px) {
  ion-app {
    background-size: cover;
    background-position: center;
  }
}

@media (min-width: 481px) and (max-width: 768px) {
  ion-app {
    background-size: cover;
    background-position: center;
  }
}

@media (min-width: 769px) {
  ion-app {
    background-size: cover;
    background-position: center;
  }
}

/* Add extra spacing for footer */
.scroll-content {
  padding-bottom: calc(120px + env(safe-area-inset-bottom)) !important;
}

/* Toast width control and glass effect */
ion-toast {
  --width: auto;
  --max-width: fit-content;
  --min-width: auto;
  --background: #{$bg-toast};
  --border-radius: 16px;
  --box-shadow: 0 4px 30px #{$shadow-black-10};

  --ion-safe-area-bottom: 75px;
}

/* Apply glass effect only to the toast content, not the backdrop */
ion-toast .toast-wrapper {
  backdrop-filter: $backdrop-blur-light;
  -webkit-backdrop-filter: $backdrop-blur-light;
}

/* Custom Modal Styling */
.save-mix-modal {
  --backdrop-opacity: 0.7;
  --width: 90%;
  --max-width: 500px;
  --height: auto;
  --border-radius: 1.5rem;
  --background: transparent;

  align-items: center;
  justify-content: center;
  background: transparent !important;

  .modal-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: block;
    background: transparent !important;
  }

  .modal-shadow {
    display: none !important;
  }

  ion-backdrop {
    opacity: 0.7 !important;
    background: rgba(0, 0, 0, 0.6) !important;
    animation: backdropFadeIn 0.3s ease-out !important;

    body.light & {
      background: rgba(0, 0, 0, 0.3) !important;
    }
  }
}

/* Premium Toast Styling */
ion-toast.premium-toast {
  --background: linear-gradient(
    135deg,
    rgba(255, 193, 7, 0.95),
    rgba(255, 152, 0, 0.95)
  );
  --color: #1a1a1a;
  --border-radius: 16px;
  --box-shadow: 0 8px 32px rgba(255, 193, 7, 0.4), 0 4px 12px rgba(0, 0, 0, 0.2);
  --white-space: 200px;

  &::part(message) {
    font-weight: 600;
    font-size: 15px;
    color: #1a1a1a;
  }

  &::part(button) {
    color: #1a1a1a;
    font-weight: 700;
    text-transform: uppercase;
    font-size: 13px;

    &:hover {
      background: rgba(0, 0, 0, 0.1);
    }
  }

  // Light mode adjustments
  body.light & {
    --background: linear-gradient(
      135deg,
      rgba(255, 215, 0, 0.98),
      rgba(255, 165, 0, 0.98)
    );
    --box-shadow: 0 8px 32px rgba(255, 193, 7, 0.5),
      0 4px 12px rgba(0, 0, 0, 0.15);
  }
}

@keyframes backdropFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 0.7;
  }
}

/* Custom Alert Styling */
.custom-alert {
  --backdrop-opacity: 0.6;

  .alert-wrapper {
    border-radius: 1.5rem;
    background: rgba(26, 32, 44, 0.95);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.12);

    body.light & {
      background: rgba(235, 240, 245, 0.95);
      border-color: rgba(0, 0, 0, 0.15);
    }
  }

  .alert-title {
    color: #ffffff;
    font-weight: 600;

    body.light & {
      color: #000000;
    }
  }

  .alert-message {
    color: rgba(255, 255, 255, 0.8);

    body.light & {
      color: rgba(0, 0, 0, 0.8);
    }
  }

  .alert-button-cancel {
    color: rgba(255, 255, 255, 0.6);

    body.light & {
      color: rgba(0, 0, 0, 0.6);
    }
  }

  .alert-button-delete {
    color: #ff4444;
    font-weight: 600;

    body.light & {
      color: #dc3545;
    }
  }
}

/* Listening Statistics Modal Styling */
.listening-stats-modal {
  --backdrop-opacity: 0.7;
  --width: 90%;
  --max-width: 600px;
  --height: auto;
  --max-height: 85vh;
  --border-radius: 1.5rem;
  --background: transparent;

  align-items: center;
  justify-content: center;
  background: transparent !important;

  .modal-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: block;
    background: transparent !important;
  }

  .modal-shadow {
    display: none !important;
  }

  ion-backdrop {
    opacity: 0.7 !important;
    background: rgba(0, 0, 0, 0.6) !important;
    animation: backdropFadeIn 0.3s ease-out !important;

    body.light & {
      background: rgba(0, 0, 0, 0.3) !important;
    }
  }
}
